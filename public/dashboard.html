<!DOCTYPE html>
<html lang="en">
<head>
    <title>Dashboard | LifeSignal</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <button class="theme-btn" onclick="toggleTheme()"><i id="theme-icon" class="fas fa-sun"></i></button>

    <div class="dashboard-layout">
        <nav class="sidebar">
            <div class="logo-section"><h2>LifeSignal</h2><p>Health Intelligence</p></div>
            <ul class="nav-menu">
                <li class="active"><a href="/dashboard"><i class="fas fa-chart-pie"></i> Dashboard</a></li>
                <li><a href="/assessment"><i class="fas fa-notes-medical"></i> Health Check</a></li>
                <li><a href="/history"><i class="fas fa-history"></i> History</a></li>
                <li style="margin-top:auto"><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </nav>
        
        <main class="main-content" style="flex: 1; padding: 30px; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h1 id="welcome-msg">Welcome</h1>
                <button onclick="window.location.href='/assessment'">+ New Entry</button>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px;">
                <div class="stat-card">
                    <div style="display:flex; gap:15px; align-items:center;">
                        <i class="fas fa-bed" style="font-size: 2rem; color: #3498db;"></i>
                        <div><h2 id="avg-sleep">--</h2><p>Avg Sleep (Hrs)</p></div>
                    </div>
                </div>
                <div class="stat-card">
                    <div style="display:flex; gap:15px; align-items:center;">
                        <i class="fas fa-heartbeat" style="font-size: 2rem; color: #e74c3c;"></i>
                        <div><h2 id="health-status">--</h2><p>Risk Status</p></div>
                    </div>
                </div>
                <div class="stat-card">
                    <div style="display:flex; gap:15px; align-items:center;">
                        <i class="fas fa-weight" style="font-size: 2rem; color: #2ecc71;"></i>
                        <div><h2 id="avg-bmi">--</h2><p>BMI Score</p></div>
                    </div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 25px;">
                
                <div class="content-card">
                    <h3><i class="fas fa-chart-area"></i> Trends</h3>
                    <div class="chart-wrapper">
                        <canvas id="healthChart"></canvas>
                    </div>
                </div>

                <div class="content-card">
                    <h3><i class="fas fa-clock"></i> Recent Activity</h3>
                    <table style="margin-top: 15px;">
                        <tbody id="recent-table">
                            <tr><td>Loading...</td></tr>
                        </tbody>
                    </table>
                    <a href="/history" style="display:block; text-align:center; margin-top:20px; color:var(--accent);">View Full History â†’</a>
                </div>
            </div>
        </main>
    </div>

    <script src="js/theme.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>